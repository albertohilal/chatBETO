#!/bin/bash

echo "üöÄ PREPARACI√ìN PARA PUPPETEER CHATGPT"
echo "====================================="
echo ""
echo "üìã PASOS A SEGUIR:"
echo ""
echo "1Ô∏è‚É£  ABRIR CHROME NORMAL:"
echo "   - Abre Google Chrome desde el men√∫ de aplicaciones"
echo "   - NO desde terminal, usa el navegador normal"
echo ""
echo "2Ô∏è‚É£  HACER LOGIN EN CHATGPT:"
echo "   - Ve a https://chatgpt.com/"
echo "   - Selecciona la cuenta de Google con ChatGPT de pago"
echo "   - Haz login completamente"
echo "   - Verifica que puedes ver tus conversaciones"
echo ""
echo "3Ô∏è‚É£  VERIFICAR QUE EST√ÅS LOGUEADO:"
echo "   - Debes ver el sidebar con conversaciones"
echo "   - Debes ver tus proyectos (si los tienes)"
echo "   - La URL debe ser https://chatgpt.com/"
echo ""
echo "4Ô∏è‚É£  CERRAR CHROME:"
echo "   - Cierra completamente Chrome (todas las ventanas)"
echo "   - Esto guarda la sesi√≥n en el perfil"
echo "   - IMPORTANTE: Aseg√∫rate de que NO hay Chrome corriendo"
echo ""
echo "5Ô∏è‚É£  VERIFICAR CHROME CERRADO:"
echo "   - Ejecuta: pkill chrome"
echo "   - O verifica con: ps aux | grep chrome"
echo ""
echo "6Ô∏è‚É£  EJECUTAR PUPPETEER:"
echo "   - Ejecuta: npm test"
echo "   - Puppeteer usar√° la sesi√≥n guardada"
echo ""
echo "‚ö†Ô∏è  IMPORTANTE:"
echo "   - NO hagas login desde Puppeteer"
echo "   - La sesi√≥n debe estar guardada ANTES de ejecutar el script"
echo "   - Si hay error, repite desde el paso 1"
echo ""
echo "üîÑ ¬øQuieres ejecutar el script ahora? (despu√©s de hacer login manual)"
echo "   Presiona Enter cuando hayas completado todos los pasos..."

read -p ""

echo ""
echo "ÔøΩ Cerrando cualquier instancia de Chrome..."
pkill -f chrome || true
sleep 2

echo ""
echo "ÔøΩüöÄ Ejecutando Puppeteer con sesi√≥n guardada..."
echo ""

# Ejecutar el script de Puppeteer
node puppeteer_test.js